@inject UserSessionState Session

<Router AppAssembly="typeof(Program).Assembly">
  <Found Context="routeData">
    @if (RequiresAuthentication(routeData.PageType) && !Session.IsAuthenticated)
    {
      <RedirectToLogin />
    }
    else
    {
      <RouteView RouteData="routeData" DefaultLayout="typeof(Layout.MainLayout)" />
      <FocusOnNavigate RouteData="routeData" Selector="h1" />
    }
  </Found>
  <NotFound>
    <LayoutView Layout="typeof(Layout.MainLayout)">
      <p>Route not found.</p>
    </LayoutView>
  </NotFound>
</Router>

@code {
  private static bool RequiresAuthentication(Type pageType)
    => pageType != typeof(Pages.Login) && pageType != typeof(Pages.Register);
}
