@inject UserSessionState Session

<nav class="nav-shell @(ModeClass)">
  @foreach (var item in Items)
  {
    <NavLink href="@item.Href" Match="@item.Match" class="nav-item" title="@item.Label">
      @if (Mobile)
      {
        <span class="nav-icon" aria-hidden="true">@item.Icon</span>
      }
      <span class="nav-label">@item.Label</span>
    </NavLink>
  }
</nav>

@code {
  [Parameter] public bool Mobile { get; set; }

  [Parameter] public bool Header { get; set; }

  private string ModeClass => Mobile ? "mobile" : (Header ? "header" : "header");

  private IReadOnlyList<NavEntry> Items => Session.IsAuthenticated ? AuthenticatedItems : PublicItems;

  private static readonly IReadOnlyList<NavEntry> PublicItems =
  [
    new("Login", "/login", "↗", NavLinkMatch.All),
    new("Register", "/register", "⊕", NavLinkMatch.All)
  ];

  private static readonly IReadOnlyList<NavEntry> AuthenticatedItems =
  [
    new("Overview", "/overview", "◍", NavLinkMatch.All),
    new("Transactions", "/transactions", "≋", NavLinkMatch.Prefix),
    new("Add", "/add-transaction", "＋", NavLinkMatch.All),
    new("Insights", "/insights", "✦", NavLinkMatch.Prefix)
  ];

  private sealed record NavEntry(string Label, string Href, string Icon, NavLinkMatch Match);
}
