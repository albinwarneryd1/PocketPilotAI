@page "/add-transaction"
@inject TransactionsApi TransactionsApi
@inject NavigationManager NavigationManager

<div class="page-stack">
  <section class="page-head">
    <div class="page-head-copy">
      <p class="page-kicker">Add transaction</p>
      <h2 class="page-title">Capture spending in seconds</h2>
      <p class="muted">One clean flow: details, review, save.</p>
    </div>

    <a class="btn-secondary" href="/transactions">Back to feed</a>
  </section>

  <HeroCard AdditionalClass="card-rise">
    <div class="section-header">
      <div class="section-header-copy">
        <h3>Fast entry flow</h3>
        <p class="muted">Use clear merchant and category context for better AI recommendations.</p>
      </div>
    </div>

    <div class="badge-row">
      <TrendBadge Label="Step 1: Details" Variant="up" />
      <TrendBadge Label="Step 2: Review" Variant="neutral" />
      <TrendBadge Label="Step 3: Save" Variant="neutral" />
    </div>
  </HeroCard>

  <ListCard AdditionalClass="card-rise">
    <TransactionForm OnSubmit="Create" />
  </ListCard>
</div>

@code {
  private async Task Create(CreateTransactionRequest request)
  {
    TransactionDto? result = await TransactionsApi.CreateAsync(request);
    if (result is not null)
    {
      NavigationManager.NavigateTo("/transactions");
    }
  }
}
