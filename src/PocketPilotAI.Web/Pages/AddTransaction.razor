@page "/add-transaction"
@inject TransactionsApi TransactionsApi
@inject NavigationManager NavigationManager

<div class="page-stack decision-flow">
  <section class="page-head">
    <div class="page-head-copy">
      <p class="page-kicker">Add transaction</p>
      <h2 class="page-title">One focused entry flow</h2>
      <p class="muted">Add clean data now, get better insights later.</p>
    </div>

    <a class="btn-secondary" href="/transactions">Back to transactions</a>
  </section>

  <HeroCard AdditionalClass="card-rise">
    <p class="decision-kicker">Step by step</p>
    <h3>Enter details, review, save</h3>
    <p class="muted">Keep merchant and notes clear so the AI coach can explain patterns better.</p>
  </HeroCard>

  <ListCard AdditionalClass="card-rise">
    <TransactionForm OnSubmit="Create" />
  </ListCard>
</div>

@code {
  private async Task Create(CreateTransactionRequest request)
  {
    TransactionDto? result = await TransactionsApi.CreateAsync(request);
    if (result is not null)
    {
      NavigationManager.NavigateTo("/transactions");
    }
  }
}
