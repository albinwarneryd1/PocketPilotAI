@page "/add-transaction"
@inject TransactionsApi TransactionsApi
@inject NavigationManager NavigationManager
@inject UserSessionState Session

<h2>Add Transaction</h2>
<p class="muted">Fast entry for new spend/income events.</p>

<section class="panel">
  <TransactionForm OnSubmit="Create" />
</section>

@code {
  protected override void OnInitialized()
  {
    if (!Session.IsAuthenticated)
    {
      NavigationManager.NavigateTo("/login", forceLoad: true);
    }
  }

  private async Task Create(CreateTransactionRequest request)
  {
    var result = await TransactionsApi.CreateAsync(request);
    if (result is not null)
    {
      NavigationManager.NavigateTo("/transactions");
    }
  }
}
